<div class="page-header">
    <h1><i class="fas fa-boxes"></i> All Items</h1>
    <div class="header-actions">
        <a href="/items/new" class="btn btn-primary">
            <i class="fas fa-plus"></i> Add New Item
        </a>
        <a href="/low-stock" class="btn btn-warning">
            <i class="fas fa-exclamation-triangle"></i> Low Stock
        </a>
    </div>
</div>

<!-- Search Form -->
<div class="search-box">
    <form action="/search" method="GET" class="search-form">
        <div class="search-input-group">
            <input 
                type="text" 
                name="q" 
                placeholder="Search items by name, brand, model, or description..." 
                value="<%= query || '' %>"
                class="search-input"
            >
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-search"></i> Search
            </button>
        </div>
    </form>
</div>

<% if (items.length === 0) { %>
    <div class="empty-state">
        <i class="fas fa-box-open fa-3x"></i>
        <h3>No Items Found</h3>
        <p>Get started by adding your first item to inventory.</p>
        <a href="/items/new" class="btn btn-primary">
            <i class="fas fa-plus"></i> Add Item
        </a>
    </div>
<% } else { %>
    <div class="table-container">
        <table class="table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Brand</th>
                    <th>Price</th>
                    <th>Stock</th>
                    <th>Value</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% items.forEach(item => { 
                    const totalValue = item.price * item.stock_quantity;
                %>
                    <tr>
                        <td>
                            <div class="item-info">
                                <% if (item.image_url) { %>
                                    <img src="<%= item.image_url %>" alt="<%= item.name %>" class="item-thumbnail">
                                <% } %>
                                <div>
                                    <strong><%= item.name %></strong>
                                    <% if (item.model) { %>
                                        <br><small class="text-muted">Model: <%= item.model %></small>
                                    <% } %>
                                    <% if (item.sku) { %>
                                        <br><small class="text-muted">SKU: <%= item.sku %></small>
                                    <% } %>
                                </div>
                            </div>
                        </td>
                        <td>
                            <a href="/categories/<%= item.category_id %>" class="badge badge-category">
                                <i class="fas fa-folder"></i> <%= item.category_name %>
                            </a>
                        </td>
                        <td><%= item.brand || 'â€”' %></td>
                        <td class="text-right">$<%= parseFloat(item.price).toFixed(2) %></td>
                        <td>
                            <span class="badge <%= item.stock_quantity > 10 ? 'badge-success' : item.stock_quantity > 0 ? 'badge-warning' : 'badge-danger' %>">
                                <%= item.stock_quantity %>
                            </span>
                        </td>
                        <td class="text-right">$<%= totalValue.toFixed(2) %></td>
                        <td>
                            <div class="table-actions">
                                <a href="/items/<%= item.id %>" class="btn-icon" title="View">
                                    <i class="fas fa-eye"></i>
                                </a>
                                <a href="/items/<%= item.id %>/edit" class="btn-icon" title="Edit">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a href="/items/<%= item.id %>/delete" class="btn-icon btn-danger" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="5" class="text-right"><strong>Total Inventory Value:</strong></td>
                    <td class="text-right">
                        <strong>$<%= items.reduce((sum, item) => sum + (item.price * item.stock_quantity), 0).toFixed(2) %></strong>
                    </td>
                    <td></td>
                </tr>
            </tfoot>
        </table>
    </div>
<% } %>
